{"ast":null,"code":"import _objectSpread from\"C:/Users/pc/Desktop/unifrontendweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/* eslint-disable react/jsx-pascal-case */ /* eslint-disable no-unused-vars */import React from'react';import{Card,Grid,makeStyles,Paper}from'@material-ui/core';import Controls from'../../components/controls/Controls';import{useFormL,Form}from'../../components/useFormL';import{CircularProgress}from'@material-ui/core';import*as authService from'../../services/authService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialValues={username:'',password:'',loading:false,message:'',checkedB:false};var useStyles=makeStyles(function(theme){return{appMain:{}};});export default function Login(props){//const { addOrEdit, recordForEdit } = props\nvar validate=function validate(){var fieldValues=arguments.length>0&&arguments[0]!==undefined?arguments[0]:values;var temp=_objectSpread({},errors);if('username'in fieldValues)temp.username=fieldValues.username?\"\":\"This field is required.\";if('password'in fieldValues)temp.password=fieldValues.password?\"\":\"This field is required.\";setErrors(_objectSpread({},temp));if(fieldValues===values)return Object.values(temp).every(function(x){return x===\"\";});};var handleSubmit=function handleSubmit(e){e.preventDefault();if(validate()){values.loading=true;authService.login(values.username,values.password).then(function(){props.history.push(\"/dashboard\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setValues(values.message=resMessage,values.loading=false);});}};var _useFormL=useFormL(initialValues,true,validate),values=_useFormL.values,setValues=_useFormL.setValues,errors=_useFormL.errors,setErrors=_useFormL.setErrors,handleInputChange=_useFormL.handleInputChange,resetForm=_useFormL.resetForm;// useEffect(() => {\n//     if (recordForEdit !== null)\n//         setValues({\n//             ...recordForEdit\n//         })\n// }, [recordForEdit])\nvar img={gap:'15px',position:'center',padding:'0px',height:'90px',margin:'0rem'};var paperStyle={padding:'20px',width:350,height:'70vh',margin:'50px'};var btnstyle={margin:'8px 0'};var classes=useStyles();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:/*#__PURE__*/_jsxs(Card,{style:paperStyle,children:[/*#__PURE__*/_jsxs(Grid,{align:\"center\",children:[/*#__PURE__*/_jsx(\"img\",{style:img,src:\"logoUni.jpg\",alt:\"\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"LOGIN IN\"})]}),values.message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:values.message})}),/*#__PURE__*/_jsx(Controls.textField,{label:\"Username\",placeholder:\"Nom utilisateur\",name:\"username\",fullWidth:true,value:values.username,onChange:handleInputChange,error:errors.username}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Controls.textField,{label:\"Password\",placeholder:\"Mot de passe\",type:\"password\",name:\"password\",fullWidth:true,value:values.password,onChange:handleInputChange,error:errors.password}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Controls.Checkbox,{name:\"checkedB\",label:\"Remember\",checked:values.checkedB,onChange:handleInputChange,value:values.checkedB,ref:function ref(c){values.checkedB=c;}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:btnstyle,children:/*#__PURE__*/_jsx(Controls.Button,{type:\"submit\",variant:\"contained\",text:values.loading?/*#__PURE__*/_jsx(CircularProgress,{}):'LOGIN',disabled:values.loading,fullWidth:true})})]})})})});}","map":{"version":3,"names":["React","Card","Grid","makeStyles","Paper","Controls","useFormL","Form","CircularProgress","authService","initialValues","username","password","loading","message","checkedB","useStyles","theme","appMain","Login","props","validate","fieldValues","values","temp","errors","setErrors","Object","every","x","handleSubmit","e","preventDefault","login","then","history","push","window","location","reload","error","resMessage","response","data","toString","setValues","handleInputChange","resetForm","img","gap","position","padding","height","margin","paperStyle","width","btnstyle","classes","c"],"sources":["C:/Users/pc/Desktop/unifrontendweb/src/pages/Authticate/Login.js"],"sourcesContent":["/* eslint-disable react/jsx-pascal-case */\r\n/* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport { Card, Grid,makeStyles,Paper } from '@material-ui/core'\r\nimport Controls from '../../components/controls/Controls';\r\nimport { useFormL, Form } from '../../components/useFormL';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport * as authService from '../../services/authService'\r\n\r\nconst initialValues = {\r\n    username: '',\r\n    password: '',\r\n    loading: false,\r\n    message: '',\r\n    checkedB: false\r\n\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    appMain: {\r\n\r\n    }\r\n  }))\r\n\r\nexport default function Login(props) {\r\n    //const { addOrEdit, recordForEdit } = props\r\n\r\n    const validate = (fieldValues = values) => {\r\n        let temp = { ...errors }\r\n        if ('username' in fieldValues)\r\n            temp.username = fieldValues.username ? \"\" : \"This field is required.\"\r\n        if ('password' in fieldValues)\r\n            temp.password = fieldValues.password ? \"\" : \"This field is required.\"\r\n        setErrors({\r\n            ...temp\r\n        })\r\n\r\n        if (fieldValues === values)\r\n            return Object.values(temp).every(x => x === \"\")\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        if (validate()) {\r\n            values.loading = true\r\n                authService.login(values.username, values.password)\r\n                    .then(() => {\r\n                        props.history.push(\"/dashboard\")\r\n                        window.location.reload();\r\n                    },\r\n                    error => {\r\n                        const resMessage = (error.response && \r\n                            error.response.data && \r\n                            error.response.data.message) || \r\n                            error.message || \r\n                            error.toString();\r\n                            \r\n                        setValues(\r\n                            values.message = resMessage,\r\n                            values.loading = false\r\n                        )\r\n                        \r\n                        \r\n                    }\r\n                );\r\n        }\r\n    }\r\n\r\n    const {\r\n        values,\r\n        setValues,\r\n        errors,\r\n        setErrors,\r\n        handleInputChange,\r\n        resetForm\r\n    } = useFormL(initialValues, true, validate);\r\n\r\n    // useEffect(() => {\r\n    //     if (recordForEdit !== null)\r\n    //         setValues({\r\n    //             ...recordForEdit\r\n    //         })\r\n    // }, [recordForEdit])\r\n    const img = {gap: '15px', position:'center', padding:'0px', height: '90px', margin:'0rem'};\r\n    const paperStyle={ padding:'20px', width: 350, height: '70vh', margin: '50px'}\r\n    const btnstyle={margin:'8px 0'}\r\n    const classes = useStyles();\r\n    return (\r\n        <>\r\n            <Form onSubmit={handleSubmit}>\r\n                <div align='center'>\r\n                    <Card style={paperStyle}>\r\n                        <Grid align='center'>\r\n                            <img style={img} src='logoUni.jpg' alt=''/>\r\n                            <h2>LOGIN IN</h2>\r\n                        </Grid>\r\n                        {values.message && (\r\n                            <div className='form-group'>\r\n                                <div className='alert alert-danger' role='alert'>\r\n                                    {values.message}\r\n                                </div>\r\n                            </div>)\r\n                        }\r\n                        <Controls.textField\r\n                            label='Username' \r\n                            placeholder='Nom utilisateur' \r\n                            name='username'\r\n                            fullWidth\r\n                            value={values.username}\r\n                            onChange={handleInputChange}\r\n                            error={errors.username}\r\n                        /><br/><br/>\r\n                        <Controls.textField \r\n                            label='Password' \r\n                            placeholder='Mot de passe'\r\n                            type='password' \r\n                            name='password' \r\n                            fullWidth\r\n                            value={values.password}\r\n                            onChange={handleInputChange}\r\n                            error={errors.password} \r\n                        />\r\n                        <br/><br/>\r\n                        <Controls.Checkbox \r\n                        name='checkedB'\r\n                        label=\"Remember\"\r\n                        checked={values.checkedB}\r\n                        onChange={handleInputChange}\r\n                        value={values.checkedB}\r\n                        ref={c => {\r\n                            values.checkedB = c;\r\n                        }}\r\n                        /><br/><br/>\r\n                        <div style={btnstyle}>\r\n                            <Controls.Button\r\n                                type='submit' \r\n                                variant=\"contained\" \r\n                                text={ values.loading ? (<CircularProgress />) : 'LOGIN'}\r\n                                disabled={values.loading}\r\n                                fullWidth\r\n                            />\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n            </Form>\r\n        </>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}