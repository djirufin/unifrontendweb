{"ast":null,"code":"import _slicedToArray from\"C:/Users/pc/Desktop/unifrontendweb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Paper,makeStyles,TableBody,TableRow,TableCell,Toolbar,InputAdornment}from'@material-ui/core';import*as adminService from\"../../services/adminService\";import Controls from\"../../components/controls/Controls\";import{Search}from\"@material-ui/icons\";import AddIcon from'@material-ui/icons/Add';import Popup from\"../../components/Popup\";import EditOutlinedIcon from'@material-ui/icons/EditOutlined';import Header from'../../components/Header';import useTable from'../../components/useTable';import RegionForm from'./RegionForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{pageContent:{margin:theme.spacing(1),padding:theme.spacing(1)},searchInput:{width:'50%',right:'1rem'},newButton:{position:'absolute',right:'10px'}};});var headCells=[{id:'region',label:'Région'},{id:'cota',label:'Montant Cotisation'},{id:'versement',label:'Versement'},{id:'dateVersement',label:'Date'},{id:'actions',label:'Action',disableSorting:true}];export default function Region(){var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),recordForEdit=_useState2[0],setRecordForEdit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),records=_useState4[0],setRecords=_useState4[1];var getAll=function getAll(){adminService.getAllRegion().then(function(res){setRecords(res.data);});};useEffect(function(){getAll();},[]);var _useState5=useState({fn:function fn(records){return records;}}),_useState6=_slicedToArray(_useState5,2),filterFn=_useState6[0],setFilterFn=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),openPopup=_useState8[0],setOpenPopup=_useState8[1];// const [notify, setNotify] = useState({ isOpen: false, message: '', type: '' })\n// const [confirmDialog, setConfirmDialog] = useState({ isOpen: false, title: '', subTitle: '' })\nvar _useTable=useTable(records,headCells,filterFn),TblContainer=_useTable.TblContainer,TblHead=_useTable.TblHead,TblPagination=_useTable.TblPagination,recordsAfterPagingAndSorting=_useTable.recordsAfterPagingAndSorting;var handlSearch=function handlSearch(e){var target=e.target;setFilterFn({fn:function fn(records){if(target.value===\"\")return records;else return records.filter(function(x){return x.region.toLowerCase().includes(target.value);});}});};var addOrEdit=function addOrEdit(fe,resetForm){{fe.id?adminService.updateAdmin(fe.id,fe):fe.id=0;console.log(fe);console.log(fe.id);}if(fe.id===0){adminService.insertAdmin(fe);console.log(fe);console.log(fe.id);}resetForm();// window.location.reload()\nsetRecordForEdit(null);setOpenPopup(false);getAll();};var openInPopup=function openInPopup(fe){setRecordForEdit(fe);setOpenPopup(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Paper,{className:classes.pageContent,children:[/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Controls.Input,{label:\"Recherche\",className:classes.searchInput,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Search,{})})},onChange:handlSearch}),/*#__PURE__*/_jsx(Controls.Button,{text:\"Ajouter\",variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),className:classes.newButton,onClick:function onClick(){setOpenPopup(true);setRecordForEdit(null);}})]}),/*#__PURE__*/_jsxs(TblContainer,{children:[/*#__PURE__*/_jsx(TblHead,{}),/*#__PURE__*/_jsx(TableBody,{children:recordsAfterPagingAndSorting().map(function(fe){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:fe.eglise}),/*#__PURE__*/_jsx(TableCell,{children:fe.cota}),/*#__PURE__*/_jsx(TableCell,{children:fe.versement}),/*#__PURE__*/_jsx(TableCell,{children:fe.creationdate}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Controls.ActionButton,{color:\"primary\",onClick:function onClick(){openInPopup(fe);},children:/*#__PURE__*/_jsx(EditOutlinedIcon,{fontSize:\"small\"})})})]},fe.id);})})]}),/*#__PURE__*/_jsx(TblPagination,{})]}),/*#__PURE__*/_jsx(Popup,{title:\"Formulaire R\\xE9gion\",openPopup:openPopup,setOpenPopup:setOpenPopup,children:/*#__PURE__*/_jsx(RegionForm,{recordForEdit:recordForEdit,addOrEdit:addOrEdit})})]});}","map":{"version":3,"names":["React","useEffect","useState","Paper","makeStyles","TableBody","TableRow","TableCell","Toolbar","InputAdornment","adminService","Controls","Search","AddIcon","Popup","EditOutlinedIcon","Header","useTable","RegionForm","useStyles","theme","pageContent","margin","spacing","padding","searchInput","width","right","newButton","position","headCells","id","label","disableSorting","Region","classes","recordForEdit","setRecordForEdit","records","setRecords","getAll","getAllRegion","then","res","data","fn","filterFn","setFilterFn","openPopup","setOpenPopup","TblContainer","TblHead","TblPagination","recordsAfterPagingAndSorting","handlSearch","e","target","value","filter","x","region","toLowerCase","includes","addOrEdit","fe","resetForm","updateAdmin","console","log","insertAdmin","openInPopup","startAdornment","map","eglise","cota","versement","creationdate"],"sources":["C:/Users/pc/Desktop/unifrontendweb/src/pages/regions/Region.js"],"sourcesContent":["import React, {useEffect, useState } from 'react'\nimport { Paper, makeStyles, TableBody, TableRow, TableCell, Toolbar, InputAdornment } from '@material-ui/core';\nimport * as adminService from \"../../services/adminService\";\nimport Controls from \"../../components/controls/Controls\";\nimport { Search } from \"@material-ui/icons\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Popup from \"../../components/Popup\";\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport Header from '../../components/Header';\nimport useTable from '../../components/useTable';\nimport RegionForm from './RegionForm';\n\nconst useStyles = makeStyles(theme => ({\n    pageContent: {\n        margin: theme.spacing(1),\n        padding: theme.spacing(1)\n    },\n    searchInput: {\n        width: '50%',\n        right: '1rem'\n    },\n    newButton: {\n        position: 'absolute',\n        right: '10px'\n    }\n}))\n\n\nconst headCells = [\n    { id: 'region', label: 'Région' },\n    { id: 'cota', label: 'Montant Cotisation' },\n    { id: 'versement', label: 'Versement' },\n    { id: 'dateVersement', label: 'Date' },\n    { id: 'actions', label: 'Action', disableSorting: true }\n]\n\nexport default function Region() {\n\n    const classes = useStyles();\n    const [recordForEdit, setRecordForEdit] = useState(null)\n    const [records, setRecords] = useState([]);\n\n    const getAll = () => {\n        adminService.getAllRegion()\n        .then((res) => {\n            setRecords(res.data)\n        });\n    }\n    \n    useEffect(() => {\n        getAll();\n    }, []);\n\n    const [filterFn, setFilterFn] = useState({ fn: records => { return records; } })\n    const [openPopup, setOpenPopup] = useState(false)\n    // const [notify, setNotify] = useState({ isOpen: false, message: '', type: '' })\n    // const [confirmDialog, setConfirmDialog] = useState({ isOpen: false, title: '', subTitle: '' })\n\n    const {\n        TblContainer,\n        TblHead,\n        TblPagination,\n        recordsAfterPagingAndSorting\n    } = useTable(records, headCells, filterFn);\n\n    const handlSearch = e => {\n        let target = e.target;\n        setFilterFn({\n            fn: records => {\n                if (target.value === \"\")\n                    return records;\n                else\n                    return records.filter(x => x.region.toLowerCase().includes(target.value))\n            }\n        })\n    }\n\n    const addOrEdit = (fe, resetForm) => {\n        {(fe.id) ?\n            (adminService.updateAdmin(fe.id, fe)) :\n            fe.id = 0 \n\n            console.log(fe)\n            console.log(fe.id)\n        }\n        if(fe.id === 0) {\n            adminService.insertAdmin(fe)\n        console.log(fe)\n        console.log(fe.id)\n        }\n        resetForm()\n       // window.location.reload()\n        setRecordForEdit(null)\n        setOpenPopup(false)\n        getAll()\n    }\n\n    const openInPopup = fe => {\n        setRecordForEdit(fe)\n        setOpenPopup(true)\n    }\n\n    return (\n        <>\n            <Header />\n            <Paper className={classes.pageContent}>\n                <Toolbar>\n                    <Controls.Input\n                        label=\"Recherche\"\n                        className={classes.searchInput}\n                        InputProps={{\n                            startAdornment: (<InputAdornment position=\"start\">\n                                <Search />\n                            </InputAdornment>)\n                        }}\n                        onChange={handlSearch}\n                    />\n                    <Controls.Button\n                        text=\"Ajouter\"\n                        variant=\"outlined\"\n                        startIcon={<AddIcon />}\n                        className={classes.newButton}\n                        onClick={() => { setOpenPopup(true); setRecordForEdit(null); }}\n                    />\n                </Toolbar>\n                <TblContainer>\n                    <TblHead />\n                    <TableBody>\n                        {\n                            recordsAfterPagingAndSorting().map(fe =>\n                                (<TableRow key={fe.id}>\n                                    <TableCell>{fe.eglise}</TableCell>\n                                    <TableCell>{fe.cota}</TableCell>\n                                    <TableCell>{fe.versement}</TableCell>\n                                    <TableCell>{fe.creationdate}</TableCell>\n                                    <TableCell>\n                                        <Controls.ActionButton\n                                            color=\"primary\"\n                                            onClick={() => { openInPopup(fe) }}>\n                                            <EditOutlinedIcon fontSize=\"small\" />\n                                        </Controls.ActionButton>\n                                    </TableCell>\n                                </TableRow>)\n                            )\n                        }\n                    </TableBody>\n                </TblContainer>\n                <TblPagination />\n            </Paper>\n            <Popup\n                title=\"Formulaire Région\"\n                openPopup={openPopup}\n                setOpenPopup={setOpenPopup}\n            >\n                <RegionForm\n                    recordForEdit={recordForEdit}\n                    addOrEdit={addOrEdit} />\n            </Popup>\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}